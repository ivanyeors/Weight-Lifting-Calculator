"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1327],{30285:(e,t,a)=>{a.d(t,{$:()=>d,r:()=>o});var s=a(95155);a(12115);var r=a(99708),n=a(74466),i=a(59434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:n,asChild:d=!1,...l}=e,c=d?r.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,i.cn)(o({variant:a,size:n,className:t})),...l})}},43871:(e,t,a)=>{a.d(t,{p:()=>m});var s=a(95155),r=a(12115),n=a(30285),i=a(62523),o=a(44838),d=a(86422),l=a(66474),c=a(47924),u=a(79308);function m(e){let{onSelected:t,className:a,contentClassName:m,align:g="start",side:f="bottom",sideOffset:p=6,alignOffset:v=0}=e,[h,x]=(0,r.useState)(""),[b,_]=(0,r.useState)([]),[w,y]=(0,r.useState)(!0),[j,N]=(0,r.useState)(null),[k,S]=(0,r.useState)("");(0,r.useEffect)(()=>{try{let e=localStorage.getItem("fitspo:selected_user_id")||"";S(e)}catch(e){}},[]),(0,r.useEffect)(()=>{(async()=>{try{y(!0),N(null);let{data:e,error:t}=await u.N.from("managed_users").select("id, name, body_weight_kg, height_cm, age").order("updated_at",{ascending:!1});if(t)throw t;_(null!=e?e:[])}catch(e){N("Failed to load users")}finally{y(!1)}})()},[]);let I=(0,r.useMemo)(()=>{let e=h.trim().toLowerCase();return e?b.filter(t=>(t.name||"").toLowerCase().includes(e)):b},[b,h]),E=(0,r.useMemo)(()=>{if(w)return"Loading users…";if(j)return"Users unavailable";let e=b.find(e=>e.id===k);return(null==e?void 0:e.name)||"Select user"},[w,j,b,k]);return(0,s.jsx)("div",{className:a,children:(0,s.jsxs)(o.rI,{children:[(0,s.jsx)(o.ty,{asChild:!0,children:(0,s.jsxs)(n.$,{variant:"outline",className:"w-full justify-between h-10 bg-background border-border hover:bg-accent hover:text-accent-foreground transition-colors min-w-[220px]",children:[(0,s.jsxs)("span",{className:"truncate font-medium flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 opacity-70"}),E]}),(0,s.jsx)(l.A,{className:"h-4 w-4 opacity-50"})]})}),(0,s.jsxs)(o.SQ,{className:["w-[--radix-dropdown-menu-trigger-width] max-h-[350px] overflow-y-auto",m||""].join(" "),align:g,side:f,sideOffset:p,alignOffset:v,children:[(0,s.jsx)("div",{className:"px-3 py-2",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(i.p,{"aria-label":"Search users",placeholder:"Search users…",value:h,onChange:e=>x(e.target.value),onKeyDown:e=>e.stopPropagation(),autoFocus:!0,className:"pl-10 h-10 bg-background border-border hover:border-border/80 focus:border-primary"})]})}),(0,s.jsx)(o.mB,{}),w?(0,s.jsx)(o._2,{disabled:!0,children:"Loading…"}):j?(0,s.jsx)(o._2,{disabled:!0,children:j}):0===I.length?(0,s.jsx)(o._2,{disabled:!0,children:"No users found"}):(0,s.jsx)(o.Hr,{value:k,onValueChange:e=>{S(e);try{localStorage.setItem("fitspo:selected_user_id",e),window.dispatchEvent(new Event("fitspo:selected_user_changed"))}catch(e){}null==t||t(e)},children:I.map(e=>(0,s.jsx)(o.Ht,{value:e.id,className:"cursor-pointer py-3",children:(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[(0,s.jsx)("span",{className:"font-medium text-sm",children:e.name||"Unnamed user"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[null!=e.age?"".concat(e.age,"y"):"—"," • ",null!=e.height_cm?"".concat(e.height_cm,"cm"):"—"," • ",null!=e.body_weight_kg?"".concat(e.body_weight_kg,"kg"):"—"]})]})},e.id))})]})]})})}},44838:(e,t,a)=>{a.d(t,{Hr:()=>u,Ht:()=>m,SQ:()=>l,V0:()=>p,_2:()=>c,lp:()=>g,mB:()=>f,rI:()=>o,ty:()=>d});var s=a(95155);a(12115);var r=a(68313),n=a(9428),i=a(59434);function o(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"dropdown-menu",...t})}function d(e){let{...t}=e;return(0,s.jsx)(r.l9,{"data-slot":"dropdown-menu-trigger",...t})}function l(e){let{className:t,sideOffset:a=4,...n}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsx)(r.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function c(e){let{className:t,inset:a,variant:n="default",...o}=e;return(0,s.jsx)(r.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":n,className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...o})}function u(e){let{...t}=e;return(0,s.jsx)(r.z6,{"data-slot":"dropdown-menu-radio-group",...t})}function m(e){let{className:t,children:a,...o}=e;return(0,s.jsxs)(r.hN,{"data-slot":"dropdown-menu-radio-item",className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...o,children:[(0,s.jsx)("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(n.A,{className:"size-2 fill-current"})})}),a]})}function g(e){let{className:t,inset:a,...n}=e;return(0,s.jsx)(r.JU,{"data-slot":"dropdown-menu-label","data-inset":a,className:(0,i.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(r.wv,{"data-slot":"dropdown-menu-separator",className:(0,i.cn)("bg-border -mx-1 my-1 h-px",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)("span",{"data-slot":"dropdown-menu-shortcut",className:(0,i.cn)("text-muted-foreground ml-auto text-xs tracking-widest",t),...a})}},47113:(e,t,a)=>{a.d(t,{S:()=>n});var s=a(12115),r=a(79308);function n(){let[e,t]=(0,s.useState)(null),[a,n]=(0,s.useState)(!0),[i,o]=(0,s.useState)(null),d=(0,s.useCallback)(async()=>{try{var e,a,s,i,d,l,c;let u,m;n(!0),o(null);let g=localStorage.getItem("fitspo:selected_user_id");if(!g)return void t(null);let{data:f,error:p}=await r.N.from("managed_users").select("id, name, body_weight_kg, height_cm, age, skeletal_muscle_mass_kg, body_fat_mass_kg, gender, experience, medical_conditions, food_allergies, goals, note").eq("id",g).single();if(p||!f)return void t(null);let{data:v}=await r.N.from("managed_user_injuries").select("muscle_id").eq("user_id",f.id),h=(null!=v?v:[]).map(e=>e.muscle_id),x=new Set(["cat1","cat2","cat3","cat4","cat5"]),b={bodyWeight:Number(null!=(e=f.body_weight_kg)?e:70),height:Number(null!=(a=f.height_cm)?a:175),age:Number(null!=(s=f.age)?s:25),gender:(u=f.gender,"female"===u?"female":"male"),experience:(m=f.experience,x.has(m)?m:"cat3"),skeletalMuscleMass:Number(null!=(i=f.skeletal_muscle_mass_kg)?i:30),bodyFatMass:Number(null!=(d=f.body_fat_mass_kg)?d:20)};t({id:f.id,name:f.name||"User",inputs:b,injuries:h,medicalConditions:Array.isArray(f.medical_conditions)?f.medical_conditions:[],foodAllergies:Array.isArray(f.food_allergies)?f.food_allergies:[],goals:null!=(l=f.goals)?l:void 0,note:null!=(c=f.note)?c:void 0})}catch(e){o("Failed to load selected user"),t(null)}finally{n(!1)}},[]);return(0,s.useEffect)(()=>{d()},[d]),(0,s.useEffect)(()=>{let e=e=>{"fitspo:selected_user_id"===e.key&&d()},t=()=>d();return window.addEventListener("storage",e),window.addEventListener("fitspo:selected_user_changed",t),()=>{window.removeEventListener("storage",e),window.removeEventListener("fitspo:selected_user_changed",t)}},[d]),{user:e,loading:a,error:i,reload:d}}},59434:(e,t,a)=>{a.d(t,{cn:()=>n});var s=a(52596),r=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},62523:(e,t,a)=>{a.d(t,{p:()=>n});var s=a(95155);a(12115);var r=a(59434);function n(e){let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},79308:(e,t,a)=>{a.d(t,{N:()=>i});var s=a(72354);let r="https://jwwwckiphqjlubmpjumg.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp3d3dja2lwaHFqbHVibXBqdW1nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2NzA3NjYsImV4cCI6MjA3MDI0Njc2Nn0.ETVK8Ynp6BRkISWjlit-sjwZNmLaHpxK8ewPe-tjGNY";if(!r||!n)throw Error("Missing Supabase environment variables: NEXT_PUBLIC_SUPABASE_URL and/or NEXT_PUBLIC_SUPABASE_ANON_KEY");let i=(0,s.UU)(r,n,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}})}}]);