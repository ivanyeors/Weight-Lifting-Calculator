(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8851],{4863:(e,s,a)=>{"use strict";a.d(s,{Ft:()=>l,Tq:()=>i,vw:()=>t,x0:()=>n});let t=[{name:"Free",price:"free",period:"forever",description:"Great to explore the basics and try the Fitness Calculator.",features:["Core Fitness Calculator features","Access to base gym exercises","Muscle involvement breakdowns","Dark theme only"],cta:"Get started",href:"/",themeCapabilities:{canToggleTheme:!1,defaultTheme:"dark",allowedThemes:["dark"]}},{name:"Personal",price:"$5.99",period:"/mo",description:"Useful for tracking your progress and getting personalized weight recommendations.",features:["Everything in Free","Data saved in account","SMM + BFM metrics calculations","Exercise video search (YouTube)","Light + dark themes"],cta:"Subscribe",href:"https://buy.stripe.com/cNi3cudszgjt7481Rt0Ba02",yearlyPrice:"$43.00",yearlyHref:"https://buy.stripe.com/8x24gy3RZ0kvewA2Vx0Ba01",highlighted:!0,themeCapabilities:{canToggleTheme:!0,defaultTheme:"system",allowedThemes:["light","dark","system"]}},{name:"Trainer",price:"$14.99",period:"/mo",description:"For coaches, fitness trainers with multiple clients.",features:["Everything in Personal","Exercise video search (YouTube)","+2000 growing exercises updates in other categories","Save multiple users/clients configuration","Light + dark themes"],cta:"Subscribe",href:"https://buy.stripe.com/4gMaEW2NV0kvewA1Rt0Ba03",yearlyPrice:"$108.00",yearlyHref:"https://buy.stripe.com/00waEW2NVd7hewA9jV0Ba04",themeCapabilities:{canToggleTheme:!0,defaultTheme:"system",allowedThemes:["light","dark","system"]}}];function r(e){return t.find(s=>s.name===e)}function l(e){var s;let a=r(e);return null!=(s=null==a?void 0:a.themeCapabilities.canToggleTheme)&&s}function i(e){var s;let a=r(e);return null!=(s=null==a?void 0:a.themeCapabilities.allowedThemes)?s:["dark"]}function n(e){var s;let a=r(e);return null!=(s=null==a?void 0:a.themeCapabilities.defaultTheme)?s:"dark"}},14186:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},18950:(e,s,a)=>{"use strict";a.d(s,{BE:()=>u,_s:()=>i,cp:()=>c,gk:()=>x,tb:()=>m,zj:()=>d});var t=a(95155);a(12115);var r=a(69474),l=a(59434);function i(e){let{...s}=e;return(0,t.jsx)(r._s.Root,{"data-slot":"drawer",...s})}function n(e){let{...s}=e;return(0,t.jsx)(r._s.Portal,{"data-slot":"drawer-portal",...s})}function c(e){let{...s}=e;return(0,t.jsx)(r._s.Close,{"data-slot":"drawer-close",...s})}function o(e){let{className:s,...a}=e;return(0,t.jsx)(r._s.Overlay,{"data-slot":"drawer-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function d(e){let{className:s,children:a,...i}=e;return(0,t.jsxs)(n,{"data-slot":"drawer-portal",children:[(0,t.jsx)(o,{}),(0,t.jsxs)(r._s.Content,{"data-slot":"drawer-content",className:(0,l.cn)("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",s),...i,children:[(0,t.jsx)("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),a]})]})}function u(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"drawer-header",className:(0,l.cn)("flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left",s),...a})}function m(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"drawer-footer",className:(0,l.cn)("mt-auto flex flex-col gap-2 p-4",s),...a})}function x(e){let{className:s,...a}=e;return(0,t.jsx)(r._s.Title,{"data-slot":"drawer-title",className:(0,l.cn)("text-foreground font-semibold",s),...a})}},21272:(e,s,a)=>{"use strict";a.d(s,{b:()=>i});var t=a(12115),r=a(79308),l=a(4863);function i(){let[e,s]=(0,t.useState)("Free"),[a,i]=(0,t.useState)(null),[n,c]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=null;return(async()=>{var a,t,l;let{data:n}=await r.N.auth.getSession(),o=null!=(t=null==(a=n.session)?void 0:a.user)?t:null;if(o){i(o.id);let e=(null==(l=o.user_metadata)?void 0:l.plan)||null,a=localStorage.getItem("fitspo:plan")||localStorage.getItem("stronk:plan");s(e||a||"Free")}else s("Free");c(!1);let{data:d}=r.N.auth.onAuthStateChange((e,a)=>{let t=null==a?void 0:a.user;if(t){var r;i(t.id);let e=(null==(r=t.user_metadata)?void 0:r.plan)||null,a=localStorage.getItem("fitspo:plan")||localStorage.getItem("stronk:plan");s(e||a||"Free")}else i(null),s("Free")});e=()=>d.subscription.unsubscribe()})(),()=>{e&&e()}},[]);let o=(0,l.Ft)(e),d=(0,l.Tq)(e),u=(0,l.x0)(e);return{currentTier:e,userId:a,loading:n,canToggleTheme:o,allowedThemes:d,defaultTheme:u,isPaidTier:"Personal"===e||"Trainer"===e}}},23866:(e,s,a)=>{Promise.resolve().then(a.bind(a,24182))},24182:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>X});var t=a(95155),r=a(12115),l=a(30285),i=a(66695),n=a(26126),c=a(62523),o=a(47262),d=a(56671),u=a(85057),m=a(59409),x=a(22346),h=a(43871),p=a(53904),f=a(40646),g=a(85339),v=a(50589),j=a(19946);let y=(0,j.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var w=a(14186),b=a(80465);let N=(0,j.A)("cloud-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);function k(e){let{collapsed:s,searchTerm:a,setSearchTerm:r,spaces:l,selectedSpaceId:i,setSelectedSpaceId:n,workoutTypes:o,selectedWorkoutType:d,setSelectedWorkoutType:j,muscleGroups:k,selectedMuscleGroup:C,setSelectedMuscleGroup:S,isPaidTier:T,lastSyncTime:A,syncStatus:_,onManualSync:E}=e;return(0,t.jsxs)("div",{className:[s?"hidden":"fixed inset-y-0 left-0 z-50 w-94 max-w-[85vw] shadow-lg lg:sticky lg:top-0 lg:self-start lg:w-73 lg:max-w-none","border-r bg-background flex flex-col h-full lg:h-screen transition-all p-0"].join(" "),children:[(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(y,{className:"h-6 w-6 text-primary"}),!s&&(0,t.jsx)("h2",{className:"text-sm font-semibold",children:"Exercise Filters"})]})})}),!s&&(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:(0,t.jsxs)("div",{className:"p-2 space-y-5",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(u.J,{className:"text-sm font-medium",children:"Active User"}),(0,t.jsx)(h.p,{})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(u.J,{className:"text-sm font-medium",children:"Search"}),(0,t.jsx)(c.p,{placeholder:"Search exercises...",value:a,onChange:e=>r(e.target.value),className:"h-9"})]}),(0,t.jsx)(x.w,{className:"my-1"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(u.J,{className:"text-sm font-medium",children:"Workout Space"}),(0,t.jsxs)(m.l6,{value:i,onValueChange:n,children:[(0,t.jsx)(m.bq,{className:"w-full h-9 bg-background border-border hover:bg-accent hover:text-accent-foreground transition-colors",children:(0,t.jsx)(m.yv,{placeholder:"All Spaces"})}),(0,t.jsx)(m.gC,{className:"w-full max-h-64",children:l.map(e=>(0,t.jsx)(m.eb,{value:e.id,className:"cursor-pointer",children:(0,t.jsx)("div",{className:"flex items-center justify-between w-full",children:(0,t.jsx)("span",{children:e.name})})},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(u.J,{className:"text-sm font-medium",children:"Workout Type"}),(0,t.jsxs)(m.l6,{value:d,onValueChange:j,children:[(0,t.jsx)(m.bq,{className:"w-full h-9 bg-background border-border hover:bg-accent hover:text-accent-foreground transition-colors",children:(0,t.jsx)(m.yv,{placeholder:"All"})}),(0,t.jsxs)(m.gC,{className:"w-full max-h-64",children:[(0,t.jsx)(m.eb,{value:"all",className:"cursor-pointer",children:"All"}),o.map(e=>(0,t.jsx)(m.eb,{value:e,className:"cursor-pointer",children:(0,t.jsx)("div",{className:"flex items-center justify-between w-full",children:(0,t.jsx)("span",{children:e})})},e))]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(u.J,{className:"text-sm font-medium",children:"Muscle Group"}),(0,t.jsxs)(m.l6,{value:C,onValueChange:S,children:[(0,t.jsx)(m.bq,{className:"w-full h-9 bg-background border-border hover:bg-accent hover:text-accent-foreground transition-colors",children:(0,t.jsx)(m.yv,{placeholder:"All"})}),(0,t.jsxs)(m.gC,{className:"w-full max-h-64",children:[(0,t.jsx)(m.eb,{value:"all",className:"cursor-pointer",children:"All"}),k.map(e=>(0,t.jsx)(m.eb,{value:e,className:"cursor-pointer",children:(0,t.jsx)("div",{className:"flex items-center justify-between w-full",children:(0,t.jsx)("span",{children:e})})},e))]})]})]}),(0,t.jsx)(x.w,{className:"my-1"}),T&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.J,{className:"text-sm font-medium",children:"Sync Status"}),(0,t.jsxs)("div",{className:"p-3 rounded-md bg-muted/50 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{switch(_){case"syncing":return(0,t.jsx)(p.A,{className:"h-3 w-3 animate-spin"});case"success":return(0,t.jsx)(f.A,{className:"h-3 w-3 text-green-600"});case"error":return(0,t.jsx)(g.A,{className:"h-3 w-3 text-red-600"});default:return(0,t.jsx)(v.A,{className:"h-3 w-3"})}})(),(0,t.jsx)("span",{className:"text-xs font-medium",children:(()=>{switch(_){case"syncing":return"Syncing...";case"success":return"Synced";case"error":return"Sync failed";default:return"Ready"}})()})]}),E&&"syncing"!==_&&(0,t.jsx)("button",{onClick:E,className:"p-1 hover:bg-background rounded transition-colors",title:"Manual sync",children:(0,t.jsx)(p.A,{className:"h-3 w-3"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)(w.A,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:["Last sync: ",(e=>{if(!e)return"Never";let s=Math.floor((new Date().getTime()-e.getTime())/1e3),a=Math.floor(s/60),t=Math.floor(a/60);return s<60?"Just now":a<60?"".concat(a,"m ago"):t<24?"".concat(t,"h ago"):e.toLocaleDateString()})(A)]})]})]})]}),(0,t.jsx)(x.w,{className:"my-1"})]}),(0,t.jsxs)("div",{className:"space-y-2 text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{children:"Filters apply instantly"})]}),!T&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{children:"Local storage only"})]})]})]})})]})}var C=a(54165),S=a(19018),T=a(21272),A=a(79308),_=a(22209),E=a(22432),M=a(84616),F=a(16785),G=a(79397);let W=(0,j.A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var I=a(62525),z=a(54416),L=a(32919),R=a(18950),V=a(81499),B=a(92418),D=a(58227),P=a(96025),J=a(16238),q=a(83455),$=(0,B.gu)({chartName:"BarChart",GraphicalChild:D.y,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:P.W},{axisType:"yAxis",AxisComp:J.h}],formatAxisMap:q.pr}),O=a(94754),U=a(94517),K=a(17313);let H={cat1:{factor:.6,label:"Cat I (Beginner, 0-6 months)"},cat2:{factor:.7,label:"Cat II (Novice, 6-12 months)"},cat3:{factor:.8,label:"Cat III (Intermediate, 1-2 years)"},cat4:{factor:.9,label:"Cat IV (Advanced, 3-4 years)"},cat5:{factor:1,label:"Cat V (Elite, 5+ years)"}};var Z=a(47113);let Y=["Strength","Speed and Power","Agility and Coordination","Stretching","HIIT","Functional","Circuit","Plyometrics","Calisthenics","Recovery","Yoga","Pilates","Boxing","Muay Thai","Kickboxing","Karate","Taekwondo","Jujitsu","Wrestling","Judo","MMA","Fencing","Kendo","Kung Fu (Wushu)","Capoeira","Aikido","Sumo","Aquatics","Archery","Badminton","Basketball","Beach Volleyball","Breaking (breakdance)","Canoe (Sprint & Slalom)","Football","Golf","Gymnastics","Handball","Hockey","Sport Climbing","Swimming","Tennis","Table Tennis","Weightlifting","BodyWeight","Cardio"];function X(){let{user:e}=(0,Z.S)(),{currentTier:s,userId:a,isPaidTier:u}=(0,T.b)(),[m,x]=(0,r.useState)([]),[h,j]=(0,r.useState)([]),[y,w]=(0,r.useState)(!0),[N,L]=(0,r.useState)(""),[V,B]=(0,r.useState)("all"),[D,P]=(0,r.useState)("all"),[J,q]=(0,r.useState)(!1),[$,O]=(0,r.useState)(null),[U,X]=(0,r.useState)(!1),[ea,et]=(0,r.useState)(null),[er,el]=(0,r.useState)("idle"),[ei,en]=(0,r.useState)([]),[ec,eo]=(0,r.useState)("all"),[ed,eu]=(0,r.useState)({name:"",description:"",muscleGroups:[],workoutTypes:[],baseWeightFactor:1}),[em,ex]=(0,r.useState)(!1),[eh,ep]=(0,r.useState)(null),[ef,eg]=(0,r.useState)(!1),[ev,ej]=(0,r.useState)("exercises"),[ey,ew]=(0,r.useState)(null),eb=async()=>{try{let{data:e,error:s}=await A.N.from("exercises").select("id, name, description, base_weight_factor, exercise_muscles(involvement, muscles(name)), exercise_workout_types(workout_types(name))").order("name",{ascending:!0});if(s)throw s;if(e&&e.length>0){let s=e.map(e=>{var s,a,t,r,l;let i=(null!=(s=e.exercise_muscles)?s:[]).map(e=>{var s;return{name:null==(s=e.muscles)?void 0:s.name,involvement:e.involvement}}),n={};for(let{name:e,involvement:s}of i)e&&"number"==typeof s&&s>0&&(n[e]=s);let c=i.filter(e=>e.name&&e.involvement>0).map(e=>e.name),o=(null!=(a=e.exercise_workout_types)?a:[]).map(e=>{var s;return null==(s=e.workout_types)?void 0:s.name}).filter(e=>!!e&&Y.includes(e));return{id:e.id,name:null!=(t=e.name)?t:e.id,description:null!=(r=e.description)?r:"",baseWeightFactor:Number(null!=(l=e.base_weight_factor)?l:1),muscleInvolvement:n,muscleGroups:c,workoutTypes:o}});x(s);return}let[a,t,r]=await Promise.all([fetch("/exercises_meta.json"),fetch("/exercises_training_data.json"),fetch("/exercises_workout_types.json")]),l=await a.json(),i=await t.json(),n=await r.json(),c=l.exercises.map(e=>{let s=i.exercises.find(s=>s.id===e.id),a=n.exercises.find(s=>s.id===e.id);return{...e,muscleGroups:(null==s?void 0:s.muscleGroups)||[],baseWeightFactor:(null==s?void 0:s.baseWeightFactor)||1,muscleInvolvement:(null==s?void 0:s.muscleInvolvement)||{},workoutTypes:((null==a?void 0:a.workoutTypes)||[]).filter(e=>Y.includes(e))}});x(c)}catch(e){console.error("Error loading exercises:",e)}finally{w(!1)}},eN=()=>{try{let e=localStorage.getItem("custom-exercises");e&&j(JSON.parse(e))}catch(e){console.error("Error loading custom exercises from local storage:",e)}},ek=(0,r.useCallback)(async()=>{if(a)try{el("syncing");let{data:e,error:s}=await A.N.from("custom_exercises").select("*").eq("user_id",a);if(s)throw s;let t=e.map(e=>{var s;return{id:e.id,name:e.name,description:null!=(s=e.description)?s:"",muscleGroups:e.muscle_groups||[],workoutTypes:(e.workout_types||[]).filter(e=>Y.includes(e)),baseWeightFactor:e.base_weight_factor||1,muscleInvolvement:e.muscle_involvement||{},isCustom:!0,userId:e.user_id,usageCount:"number"==typeof e.usage_count?e.usage_count:0}});j(t),et(new Date),el("success")}catch(e){console.error("Error loading custom exercises from Supabase:",e),el("error"),d.oR.error("Sync failed - using local data"),eN()}},[a]);(0,r.useEffect)(()=>{eb()},[]),(0,r.useEffect)(()=>{(async()=>{try{if(e)return void ew(e.inputs);if(!u||!a)return void ew(null);ew(null)}catch(e){ew(null)}})()},[u,a,null==e?void 0:e.id]),(0,r.useEffect)(()=>{(async()=>{try{if(!a)return;let{data:e,error:s}=await A.N.from("workout_spaces").select("id, name").order("name",{ascending:!0});if(s)throw s;en((null!=e?e:[]).map(e=>({id:e.id,name:e.name})))}catch(e){console.error("Failed to load workout spaces",e)}})()},[a]),(0,r.useEffect)(()=>{u&&a?ek():eN()},[u,a,ek]);let eC=e=>{try{let s=$?h.map(s=>s.id===$.id?e:s):[...h,e];j(s),localStorage.setItem("custom-exercises",JSON.stringify(s)),d.oR.success($?"Exercise updated locally":"Exercise created locally")}catch(e){console.error("Error saving to local storage:",e),d.oR.error("Failed to save exercise locally")}},eS=e=>{try{let s=h.filter(s=>s.id!==e);j(s),localStorage.setItem("custom-exercises",JSON.stringify(s)),d.oR.success("Exercise deleted locally")}catch(e){console.error("Error updating local storage on delete:",e),d.oR.error("Failed to delete exercise locally")}},eT=async e=>{if(a)try{el("syncing");let{error:s}=await A.N.from("custom_exercises").delete().eq("id",e).eq("user_id",a);if(s)throw s;let t=h.filter(s=>s.id!==e);j(t),localStorage.setItem("custom-exercises",JSON.stringify(t)),et(new Date),el("success"),d.oR.success("Exercise deleted and synced")}catch(s){console.error("Error deleting from Supabase:",s),el("error"),d.oR.error("Sync failed - deleted locally instead"),eS(e)}},eA=async e=>{if(a)try{el("syncing");let s={id:e.id,user_id:a,name:e.name,description:e.description,muscle_groups:e.muscleGroups,workout_types:(e.workoutTypes||[]).filter(e=>Y.includes(e)),base_weight_factor:e.baseWeightFactor,muscle_involvement:e.muscleInvolvement,usage_count:"number"==typeof e.usageCount?e.usageCount:0};if($){let{error:e}=await A.N.from("custom_exercises").update(s).eq("id",$.id).eq("user_id",a);if(e)throw e}else{let{error:e}=await A.N.from("custom_exercises").insert(s);if(e)throw e}let t=$?h.map(s=>s.id===$.id?e:s):[...h,e];j(t),et(new Date),el("success"),d.oR.success($?"Exercise updated and synced":"Exercise created and synced")}catch(s){console.error("Error saving to Supabase:",s),el("error"),d.oR.error("Sync failed - saved locally instead"),eC(e)}},e_=async()=>{var e;if(!ed.name.trim())return;let s={id:(null==$?void 0:$.id)||"custom-".concat(Date.now()),name:ed.name,description:ed.description,muscleGroups:ed.muscleGroups,workoutTypes:(ed.workoutTypes||[]).filter(e=>Y.includes(e)),baseWeightFactor:ed.baseWeightFactor,muscleInvolvement:{},isCustom:!0,userId:a||void 0,usageCount:null!=(e=null==$?void 0:$.usageCount)?e:0};u&&a?await eA(s):eC(s),eM(),q(!1),O(null)},eE=async e=>{if(u&&a)return void await eT(e);eS(e)},eM=()=>{eu({name:"",description:"",muscleGroups:[],workoutTypes:[],baseWeightFactor:1})},eF=(0,r.useMemo)(()=>{let e=new Set;return[...m,...h].forEach(s=>{var a;null==(a=s.workoutTypes)||a.forEach(s=>{Y.includes(s)&&e.add(s)})}),Array.from(e).sort()},[m,h]),eG=(0,r.useMemo)(()=>{let e=new Set;return[...m,...h].forEach(s=>{var a;null==(a=s.muscleGroups)||a.forEach(s=>e.add(s))}),Array.from(e).sort()},[m,h]),eW=(0,r.useMemo)(()=>{if("all"===V)return eG;let e=new Set;return[...m,...h].filter(e=>{var s;return null==(s=e.workoutTypes)?void 0:s.includes(V)}).forEach(s=>{var a;return null==(a=s.muscleGroups)?void 0:a.forEach(s=>e.add(s))}),Array.from(e).sort()},[eG,m,h,V]),[eI,ez]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{(async()=>{try{if("all"===ec)return void ez(new Set);let{data:e,error:s}=await A.N.from("available_exercises_for_space").select("exercise_id").eq("space_id",ec);if(s)throw s;let a=new Set((null!=e?e:[]).map(e=>e.exercise_id));ez(a)}catch(e){console.error("Failed to fetch available exercises for space",e),ez(new Set)}})()},[ec]);let eL=(0,r.useMemo)(()=>{let e=[...m,...h];return N&&(e=e.filter(e=>{var s;return e.name.toLowerCase().includes(N.toLowerCase())||e.description.toLowerCase().includes(N.toLowerCase())||(null==(s=e.muscleGroups)?void 0:s.some(e=>e.toLowerCase().includes(N.toLowerCase())))})),"all"!==V&&(e=e.filter(e=>{var s;return null==(s=e.workoutTypes)?void 0:s.includes(V)})),"all"!==D&&(e=e.filter(e=>{var s;return null==(s=e.muscleGroups)?void 0:s.includes(D)})),"all"!==ec&&eI.size>0&&(e=e.filter(e=>eI.has(e.id))),e},[m,h,N,V,D,ec,eI]);return y?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((e,s)=>(0,t.jsx)("div",{className:"h-40 bg-gray-200 rounded"},s))})]})}):(0,t.jsxs)("div",{className:"flex h-screen",children:[(0,t.jsx)(k,{collapsed:U,searchTerm:N,setSearchTerm:L,spaces:[{id:"all",name:"All Spaces"},...ei],selectedSpaceId:ec,setSelectedSpaceId:eo,workoutTypes:eF,selectedWorkoutType:V,setSelectedWorkoutType:B,muscleGroups:eW,selectedMuscleGroup:D,setSelectedMuscleGroup:P,isPaidTier:u,lastSyncTime:ea,syncStatus:er,onManualSync:u&&a?()=>ek():void 0}),!U&&(0,t.jsx)("div",{className:"fixed inset-0 z-40 bg-black/40 lg:hidden",onClick:()=>X(!0),"aria-hidden":!0}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,t.jsx)(l.$,{size:"icon",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>X(e=>!e),"aria-label":U?"Expand sidebar":"Collapse sidebar",children:U?(0,t.jsx)(_.A,{className:"h-4 w-4"}):(0,t.jsx)(E.A,{className:"h-4 w-4"})}),(0,t.jsx)(S.Qp,{children:(0,t.jsx)(S.AB,{children:(0,t.jsx)(S.J5,{children:(0,t.jsx)(S.tJ,{children:"Exercise Library"})})})}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-3",children:[u&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:["syncing"===er&&(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}),"success"===er&&(0,t.jsx)(f.A,{className:"h-4 w-4 text-green-600"}),"error"===er&&(0,t.jsx)(g.A,{className:"h-4 w-4 text-red-600"}),"idle"===er&&(0,t.jsx)(v.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"hidden sm:inline",children:["syncing"===er&&"Syncing...","success"===er&&"Synced","error"===er&&"Sync failed","idle"===er&&"Cloud sync ready"]})]}),(0,t.jsxs)(C.lG,{open:J,onOpenChange:q,children:[(0,t.jsx)(C.zM,{asChild:!0,children:(0,t.jsxs)(l.$,{onClick:()=>{eM(),O(null)},children:[(0,t.jsx)(M.A,{className:"h-4 w-4"}),"Add Exercise"]})}),(0,t.jsxs)(C.Cf,{className:"max-w-md",children:[(0,t.jsxs)(C.c7,{children:[(0,t.jsx)(C.L3,{children:$?"Edit Exercise":"Add New Exercise"}),(0,t.jsx)(C.rr,{children:"Free"===s?"This exercise will be saved locally on your device.":"This exercise will be synced to your account."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Name"}),(0,t.jsx)(c.p,{value:ed.name,onChange:e=>eu(s=>({...s,name:e.target.value})),placeholder:"Exercise name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Description"}),(0,t.jsx)(c.p,{value:ed.description,onChange:e=>eu(s=>({...s,description:e.target.value})),placeholder:"Exercise description"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Weight Factor"}),(0,t.jsx)(c.p,{type:"number",step:"0.1",min:"0",max:"3",value:ed.baseWeightFactor,onChange:e=>eu(s=>({...s,baseWeightFactor:parseFloat(e.target.value)||1})),placeholder:"1.0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Muscle Groups"}),(0,t.jsx)("div",{className:"mt-2 grid grid-cols-2 gap-2 max-h-40 overflow-auto pr-1",children:eG.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(o.S,{checked:ed.muscleGroups.includes(e),onCheckedChange:s=>{eu(a=>({...a,muscleGroups:s?[...a.muscleGroups,e]:a.muscleGroups.filter(s=>s!==e)}))}}),(0,t.jsx)("span",{className:"truncate",children:e})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Workout Types"}),(0,t.jsx)("div",{className:"mt-2 grid grid-cols-2 gap-2 max-h-48 overflow-auto pr-1",children:Y.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(o.S,{checked:ed.workoutTypes.includes(e),onCheckedChange:s=>{eu(a=>({...a,workoutTypes:s?[...a.workoutTypes,e]:a.workoutTypes.filter(s=>s!==e)}))}}),(0,t.jsx)("span",{className:"truncate",children:e})]},e))})]})]}),(0,t.jsxs)(C.Es,{children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>{q(!1),O(null),eM()},children:"Cancel"}),(0,t.jsxs)(l.$,{onClick:e_,disabled:!ed.name.trim(),children:[$?"Update":"Add"," Exercise"]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-4 pt-4 pr-4 pb-4 pl-2 md:gap-6 md:pt-6 md:pr-6 md:pb-6 md:pl-6 overflow-auto",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Exercise Library"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Browse exercises and create your own custom workouts"})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(l.$,{variant:"secondary",onClick:()=>eg(!0),children:"Statistics"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"flex items-center gap-4 p-4",children:[(0,t.jsx)("div",{className:"rounded-full bg-blue-100 p-2",children:(0,t.jsx)(b.A,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Exercises"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:m.length})]})]})}),(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"flex items-center gap-4 p-4",children:[(0,t.jsx)("div",{className:"rounded-full bg-green-100 p-2",children:(0,t.jsx)(F.A,{className:"h-6 w-6 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Custom Exercises"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:h.length})]})]})}),(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"flex items-center gap-4 p-4",children:[(0,t.jsx)("div",{className:"rounded-full bg-purple-100 p-2",children:(0,t.jsx)(G.A,{className:"h-6 w-6 text-purple-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Muscle Groups"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:eG.length})]})]})})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:eL.map(e=>(0,t.jsxs)(i.Zp,{className:"hover:shadow-md transition-all cursor-pointer hover:ring-1 hover:ring-white/20 hover:border-white/20",onClick:()=>{ep(e),ex(!0)},children:[(0,t.jsx)(i.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(i.ZB,{className:"text-lg leading-tight",children:[e.name,e.isCustom&&(0,t.jsx)(n.E,{variant:"secondary",className:"ml-2 text-xs",children:"Custom"})]}),(0,t.jsx)(i.BT,{className:"mt-1",children:e.description})]}),e.isCustom&&(0,t.jsxs)("div",{className:"flex gap-1 ml-2",children:[(0,t.jsx)(l.$,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:s=>{s.stopPropagation(),O(e),eu({name:e.name,description:e.description,muscleGroups:e.muscleGroups||[],workoutTypes:e.workoutTypes||[],baseWeightFactor:e.baseWeightFactor||1}),q(!0)},children:(0,t.jsx)(W,{className:"h-3 w-3"})}),(0,t.jsx)(l.$,{size:"icon",variant:"ghost",className:"h-7 w-7 text-destructive",onClick:s=>{s.stopPropagation(),eE(e.id)},children:(0,t.jsx)(I.A,{className:"h-3 w-3"})})]})]})}),(0,t.jsx)(i.Wu,{className:"pt-0",children:(0,t.jsxs)("div",{className:"space-y-3",children:[void 0!==e.baseWeightFactor&&ey&&(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Ideal Weight: "}),(0,t.jsxs)("span",{className:"font-semibold tabular-nums",children:[(function(e,s){var a,t;let r="male"===e.gender?1:.9,l=e.age<=30?1:1-.01*(e.age-30),i=null!=(t=null==(a=H[e.experience])?void 0:a.factor)?t:.8,n="male"===e.gender?175:162,c=Math.max(.85,Math.min(1.15,1-.0025*(e.height-n))),o=e.bodyWeight,d=Math.min(Math.max(0,e.bodyFatMass),Math.max(1e-4,o)),u=Math.max(.7,Math.min(1.1,1-.5*(o>0?d/o:0)));return Math.max(0,e.skeletalMuscleMass)*r*l*i*u*c*(Number.isFinite(s)?s:1)})(ey,Number(e.baseWeightFactor||1)).toFixed(2)," kg"]})]}),e.muscleGroups&&e.muscleGroups.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Muscle Groups"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.muscleGroups.slice(0,3).map(e=>(0,t.jsx)(n.E,{variant:"outline",className:"text-xs",children:e},e)),e.muscleGroups.length>3&&(0,t.jsxs)(n.E,{variant:"outline",className:"text-xs",children:["+",e.muscleGroups.length-3]})]})]}),e.workoutTypes&&e.workoutTypes.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Workout Types"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.workoutTypes.map(e=>(0,t.jsx)(n.E,{variant:"secondary",className:"text-xs",children:e},e))})]}),e.baseWeightFactor&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Weight Factor: ",e.baseWeightFactor,"x"]})]})})]},e.id))}),0===eL.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(b.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No exercises found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:N||"all"!==V||"all"!==D?"Try adjusting your search or filters":"Add your first custom exercise to get started"}),!N&&"all"===V&&"all"===D&&(0,t.jsxs)(l.$,{onClick:()=>q(!0),children:[(0,t.jsx)(M.A,{className:"h-4 w-4"}),"Add Exercise"]})]})]})]}),(0,t.jsx)(Q,{open:em,onOpenChange:ex,exercise:eh,isPaidTier:u},(null==eh?void 0:eh.id)||"none"),(0,t.jsx)(R._s,{open:ef,onOpenChange:eg,direction:"right",children:(0,t.jsx)(R.zj,{className:"data-[vaul-drawer-direction=right]:!w-1/2 data-[vaul-drawer-direction=right]:!max-w-none",children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)(R.BE,{className:"pb-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(R.gk,{className:"text-xl",children:"Exercise Statistics"}),(0,t.jsx)(R.cp,{asChild:!0,children:(0,t.jsx)(l.$,{variant:"ghost",size:"icon","aria-label":"Close statistics",children:(0,t.jsx)(z.A,{className:"h-4 w-4"})})})]})}),(0,t.jsx)("div",{className:"p-4 pt-2 space-y-4 overflow-auto",children:(0,t.jsxs)(K.tU,{value:ev,onValueChange:e=>ej(e),children:[(0,t.jsxs)(K.j7,{className:"grid grid-cols-2 w-full sm:w-auto",children:[(0,t.jsx)(K.Xi,{value:"exercises",children:"Exercises"}),(0,t.jsx)(K.Xi,{value:"muscle",children:"Muscle Group"})]}),(0,t.jsx)(K.av,{value:"exercises",className:"mt-4 space-y-3",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(es,{exercises:[...m,...h],workoutTypes:eF,initialType:V})})}),(0,t.jsx)(K.av,{value:"muscle",className:"mt-4",children:(0,t.jsx)(ee,{mode:"muscle",exercises:[...m,...h]})})]})})]})})})]})}function Q(e){let{open:s,onOpenChange:a,exercise:c,isPaidTier:o}=e,[d,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)([]),[h,p]=(0,r.useState)(null),[f,g]=(0,r.useState)(0),[v,j]=(0,r.useState)(!1),[y,w]=(0,r.useState)(null);if(!c)return null;let b=(()=>{try{let e=null;for(let s of["workout_plans_usage","workout-plans-usage","workoutHistory","workout-plans"]){let a=localStorage.getItem(s);if(a){e=JSON.parse(a);break}}if(e&&"object"==typeof e&&c.id in e){let s=e[c.id],a="string"==typeof(null==s?void 0:s.lastUsedAt)?new Date(s.lastUsedAt):null;if(a&&!Number.isNaN(a.getTime())){let e=new Date().getTime()-a.getTime(),s=Math.floor(e/6e4);if(s<60)return"".concat(s,"m ago");let t=Math.floor(s/60);if(t<24)return"".concat(t,"h ago");return a.toLocaleDateString()}}}catch(e){}return"Never"})(),N=e=>{try{let s=e.match(/youtu\.be\/([A-Za-z0-9_-]{6,})/);if(s&&s[1])return s[1];let a=e.match(/[?&]v=([A-Za-z0-9_-]{6,})/);if(a&&a[1])return a[1];let t=e.match(/youtube\.com\/shorts\/([A-Za-z0-9_-]{6,})/);if(t&&t[1])return t[1]}catch(e){}return null},k=async()=>{if(o){u(!0),p(null),x([]);try{let e=await fetch("/api/youtube/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exerciseId:c.id,exerciseName:c.name})}),s=await e.json().catch(()=>({}));e.ok&&Array.isArray(s.videos)?(x(s.videos),g(0)):p({code:s.error||"upstream_error",message:s.message||"Video search failed. Try again later."})}catch(e){p({code:"upstream_error",message:"Video search failed. Try again later."})}finally{u(!1)}}},C=(()=>{try{let s=null;for(let e of["workout_plans_usage","workout-plans-usage","workoutHistory","workout-plans"]){let a=localStorage.getItem(e);if(a){s=JSON.parse(a);break}}if(s&&"object"==typeof s&&c.id in s){var e;return(Array.isArray(null==(e=s[c.id])?void 0:e.weeklyCounts)?s[c.id].weeklyCounts:[]).slice(-8)}}catch(e){}return Array.from({length:8}).map((e,s)=>({label:"W".concat(s+1),count:0}))})();return(0,t.jsx)(R._s,{open:s,onOpenChange:a,direction:"right",children:(0,t.jsx)(R.zj,{className:"data-[vaul-drawer-direction=right]:!w-1/2 data-[vaul-drawer-direction=right]:!max-w-none",children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)(R.BE,{className:"pb-0",children:[(0,t.jsx)(R.gk,{className:"text-xl",children:c.name}),c.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:c.description})]}),(0,t.jsxs)("div",{className:"p-4 pt-2 space-y-6 overflow-auto",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[c.muscleGroups&&c.muscleGroups.length>0&&(0,t.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:c.muscleGroups.map(e=>(0,t.jsx)(n.E,{variant:"outline",className:"text-xs",children:e},e))}),c.workoutTypes&&c.workoutTypes.length>0&&(0,t.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:c.workoutTypes.map(e=>(0,t.jsx)(n.E,{variant:"secondary",className:"text-xs",children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Usage"}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Last used: ",b]})]}),(0,t.jsx)(V.at,{id:"usage",config:{count:{label:"Sessions",color:"hsl(var(--primary))"}},className:"w-full h-56 aspect-auto",children:(0,t.jsxs)($,{data:C,children:[(0,t.jsx)(O.d,{vertical:!1,strokeDasharray:"3 3"}),(0,t.jsx)(P.W,{dataKey:"label",axisLine:!1,tickLine:!1}),(0,t.jsx)(J.h,{allowDecimals:!1,width:24,axisLine:!1,tickLine:!1}),(0,t.jsx)(U.m,{content:(0,t.jsx)(V.Nt,{}),cursor:{fill:"hsl(var(--muted))"}}),(0,t.jsx)(D.y,{dataKey:"count",fill:"var(--color-count)",radius:4})]})})]}),(0,t.jsxs)("div",{className:"bg-card text-card-foreground flex flex-col gap-4 rounded-xl border py-4 shadow-sm border-border/50",children:[(0,t.jsxs)("div",{className:"px-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)(i.ZB,{className:"text-base",children:"Exercise Videos"}),o?(0,t.jsx)(l.$,{size:"sm",onClick:k,disabled:d,children:d?"Searching…":"Search video"}):(0,t.jsx)(l.$,{size:"sm",asChild:!0,children:(0,t.jsxs)("a",{href:"/account?tab=billing#plans",children:[(0,t.jsx)(L.A,{className:"h-3 w-3 mr-1"}),"Upgrade plan"]})})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:o?"Results for ".concat(c.name):"Upgrade to Personal or Trainer plan to search exercise videos"})]}),(0,t.jsx)("div",{className:"px-4",children:o?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"w-full rounded-md overflow-hidden bg-black aspect-video",children:0===m.length?(0,t.jsx)("div",{className:"w-full h-full bg-muted/20 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center space-y-2 p-4",children:[!h&&!d&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Start by clicking on the search button"}),(null==h?void 0:h.code)==="quota_exceeded"&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Search limit reached (try again tomorrow)"}),h&&"quota_exceeded"!==h.code&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:h.message||"Try again later"})]})}):(()=>{let e=(e=>{let s=N(e);return s?"https://www.youtube.com/embed/".concat(s,"?rel=0&modestbranding=1&playsinline=1"):null})(m[f]);return e?(0,t.jsx)("iframe",{src:e,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,frameBorder:0,className:"w-full h-full"}):(0,t.jsx)("div",{className:"w-full h-full bg-muted/20"})})()}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>{m.length<=1||v||(j(!0),w("right"),setTimeout(()=>{g(e=>(e-1+m.length)%m.length),j(!1),w(null)},300))},disabled:m.length<=1||v,children:"Previous"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:m.length>0?"".concat(f+1," / ").concat(m.length):"—"}),(0,t.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>{m.length<=1||v||(j(!0),w("left"),setTimeout(()=>{g(e=>(e+1)%m.length),j(!1),w(null)},300))},disabled:m.length<=1||v,children:"Next"})]}),m.length>1&&(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto py-1",children:m.map((e,s)=>{let a=(e=>{let s=N(e);return s?"https://img.youtube.com/vi/".concat(s,"/hqdefault.jpg"):null})(e);return(0,t.jsx)("button",{onClick:()=>g(s),className:"relative h-16 aspect-video rounded border overflow-hidden ".concat(s===f?"ring-2 ring-primary":""),"aria-label":"Go to video ".concat(s+1),children:a?(0,t.jsx)("img",{src:a,alt:"Video preview",className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full bg-muted"})},e+s)})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[320px]",children:(0,t.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:(0,t.jsx)(L.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Exercise Videos Available with Upgrade"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get access to curated exercise tutorial videos from YouTube when you upgrade to Personal or Trainer plan."}),(0,t.jsx)(l.$,{asChild:!0,className:"mt-2",children:(0,t.jsx)("a",{href:"/account?tab=billing#plans",children:"Upgrade Now"})})]})})})]})]})]})})})}function ee(e){let{mode:s,exercises:a}=e,l=(0,r.useMemo)(()=>{try{for(let e of["workout_plans_usage","workout-plans-usage","workoutHistory","workout-plans"]){let s=localStorage.getItem(e);if(s)return JSON.parse(s)}}catch(e){}return{}},[]),i=(0,r.useCallback)((e,s)=>{let a=null==l?void 0:l[e];return a&&Array.isArray(a.weeklyCounts)?a.weeklyCounts.reduce((e,s)=>e+(Number(s.count)||0),0):"number"==typeof s?s:0},[l]),n=(0,r.useMemo)(()=>{if("workout"===s){let e=new Set;return a.forEach(s=>{var a;return null==(a=s.workoutTypes)?void 0:a.forEach(s=>e.add(s))}),Array.from(e).sort().map(e=>{let s=0;return a.forEach(a=>{var t;(null==(t=a.workoutTypes)?void 0:t.includes(e))&&(s+=i(a.id,a.usageCount))}),{name:e,count:s}})}let e=new Set;return a.forEach(s=>{var a;return null==(a=s.muscleGroups)?void 0:a.forEach(s=>e.add(s))}),Array.from(e).sort().map(e=>{let s=0;return a.forEach(a=>{var t;(null==(t=a.muscleGroups)?void 0:t.includes(e))&&(s+=i(a.id,a.usageCount))}),{name:e,count:s}})},[s,a,i]);return(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(V.at,{id:"stats-".concat(s),config:{count:{label:"Uses",color:"hsl(var(--primary))"}},className:"w-full h-[60vh]",children:(0,t.jsxs)($,{data:n,layout:"vertical",children:[(0,t.jsx)(O.d,{horizontal:!1,strokeDasharray:"3 3"}),(0,t.jsx)(P.W,{type:"number",allowDecimals:!1,axisLine:!1,tickLine:!1}),(0,t.jsx)(J.h,{type:"category",dataKey:"name",width:120,axisLine:!1,tickLine:!1}),(0,t.jsx)(U.m,{content:(0,t.jsx)(V.Nt,{}),cursor:{fill:"hsl(var(--muted))"}}),(0,t.jsx)(D.y,{dataKey:"count",fill:"var(--color-count)",radius:4})]})})})}function es(e){let{exercises:s,workoutTypes:a,initialType:l}=e,[i,n]=(0,r.useState)(l&&"all"!==l?l:a[0]||""),c=(0,r.useMemo)(()=>{try{for(let e of["workout_plans_usage","workout-plans-usage","workoutHistory","workout-plans"]){let s=localStorage.getItem(e);if(s)return JSON.parse(s)}}catch(e){}return{}},[]),o=(0,r.useCallback)((e,s)=>{let a=null==c?void 0:c[e];return a&&Array.isArray(a.weeklyCounts)?a.weeklyCounts.reduce((e,s)=>e+(Number(s.count)||0),0):"number"==typeof s?s:0},[c]),d=(0,r.useMemo)(()=>i?s.filter(e=>{var s;return null==(s=e.workoutTypes)?void 0:s.includes(i)}).map(e=>({name:e.name||e.id,count:o(e.id,e.usageCount)})).sort((e,s)=>s.count-e.count):[],[s,i,o]);return(0,t.jsxs)("div",{className:"w-full space-y-3",children:[(0,t.jsx)("div",{className:"w-full max-w-xs",children:(0,t.jsxs)(m.l6,{value:i,onValueChange:n,children:[(0,t.jsx)(m.bq,{className:"w-full h-9 bg-background border-border",children:(0,t.jsx)(m.yv,{placeholder:"Select type"})}),(0,t.jsx)(m.gC,{className:"max-h-64",children:a.map(e=>(0,t.jsx)(m.eb,{value:e,className:"cursor-pointer",children:e},e))})]})}),(0,t.jsx)(V.at,{id:"stats-exercises-".concat(i),config:{count:{label:"Uses",color:"hsl(var(--primary))"}},className:"w-full h-[60vh]",children:(0,t.jsxs)($,{data:d,layout:"vertical",children:[(0,t.jsx)(O.d,{horizontal:!1,strokeDasharray:"3 3"}),(0,t.jsx)(P.W,{type:"number",allowDecimals:!1,axisLine:!1,tickLine:!1}),(0,t.jsx)(J.h,{type:"category",dataKey:"name",width:180,interval:0,axisLine:!1,tickLine:!1}),(0,t.jsx)(U.m,{content:(0,t.jsx)(V.Nt,{}),cursor:{fill:"hsl(var(--muted))"}}),(0,t.jsx)(D.y,{dataKey:"count",fill:"var(--color-count)",radius:4})]})})]})}},32919:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},47262:(e,s,a)=>{"use strict";a.d(s,{S:()=>c});var t=a(95155),r=a(12115),l=a(59247),i=a(5196),n=a(59434);let c=r.forwardRef(function(e,s){let{className:a,variant:r="default",children:c,...o}=e;return(0,t.jsxs)(l.bL,{ref:s,"data-slot":"checkbox",className:(0,n.cn)("chip"===r?"inline-flex w-full items-center justify-between gap-2 rounded-md border border-input bg-background hover:bg-accent hover:text-accent-foreground data-[state=checked]:bg-primary data-[state=checked]:brightness-95 data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary data-[state=checked]:ring-2 data-[state=checked]:ring-primary/60 transition-shadow outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 pl-3 pr-4 py-2":"peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:brightness-95 data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-5 shrink-0 rounded-[4px] border-2 shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...o,children:["chip"===r&&c?(0,t.jsx)("span",{className:"flex min-w-0 flex-1 items-center gap-2 truncate text-left",children:c}):null,"chip"===r?(0,t.jsx)(l.C1,{"data-slot":"checkbox-indicator",className:(0,n.cn)("ml-2 flex items-center justify-center text-current transition-none shrink-0"),children:(0,t.jsx)(i.A,{className:"size-4"})}):(0,t.jsx)(l.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(i.A,{className:"size-4"})})]})})},54165:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>u,Es:()=>x,L3:()=>h,c7:()=>m,lG:()=>n,rr:()=>p,zM:()=>c});var t=a(95155);a(12115);var r=a(86224),l=a(54416),i=a(59434);function n(e){let{...s}=e;return(0,t.jsx)(r.bL,{"data-slot":"dialog",...s})}function c(e){let{...s}=e;return(0,t.jsx)(r.l9,{"data-slot":"dialog-trigger",...s})}function o(e){let{...s}=e;return(0,t.jsx)(r.ZL,{"data-slot":"dialog-portal",...s})}function d(e){let{className:s,...a}=e;return(0,t.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function u(e){let{className:s,children:a,showCloseButton:n=!0,...c}=e;return(0,t.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,t.jsx)(d,{}),(0,t.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...c,children:[a,n&&(0,t.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(l.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",s),...a})}function x(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function h(e){let{className:s,...a}=e;return(0,t.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",s),...a})}function p(e){let{className:s,...a}=e;return(0,t.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",s),...a})}},54416:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62525:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},83732:(e,s,a)=>{"use strict";a.d(s,{UC:()=>M,B8:()=>_,bL:()=>A,l9:()=>E});var t=a(12115);function r(e,s,{checkForDefaultPrevented:a=!0}={}){return function(t){if(e?.(t),!1===a||!t.defaultPrevented)return s?.(t)}}"undefined"!=typeof window&&window.document&&window.document.createElement;var l=a(46081),i=a(91968),n=a(28905),c=a(63655),o=a(94315),d=a(5845),u=a(61285),m=a(95155),x="Tabs",[h,p]=(0,l.A)(x,[i.RG]),f=(0,i.RG)(),[g,v]=h(x),j=t.forwardRef((e,s)=>{let{__scopeTabs:a,value:t,onValueChange:r,defaultValue:l,orientation:i="horizontal",dir:n,activationMode:h="automatic",...p}=e,f=(0,o.jH)(n),[v,j]=(0,d.i)({prop:t,onChange:r,defaultProp:null!=l?l:"",caller:x});return(0,m.jsx)(g,{scope:a,baseId:(0,u.B)(),value:v,onValueChange:j,orientation:i,dir:f,activationMode:h,children:(0,m.jsx)(c.sG.div,{dir:f,"data-orientation":i,...p,ref:s})})});j.displayName=x;var y="TabsList",w=t.forwardRef((e,s)=>{let{__scopeTabs:a,loop:t=!0,...r}=e,l=v(y,a),n=f(a);return(0,m.jsx)(i.bL,{asChild:!0,...n,orientation:l.orientation,dir:l.dir,loop:t,children:(0,m.jsx)(c.sG.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:s})})});w.displayName=y;var b="TabsTrigger",N=t.forwardRef((e,s)=>{let{__scopeTabs:a,value:t,disabled:l=!1,...n}=e,o=v(b,a),d=f(a),u=S(o.baseId,t),x=T(o.baseId,t),h=t===o.value;return(0,m.jsx)(i.q7,{asChild:!0,...d,focusable:!l,active:h,children:(0,m.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:u,...n,ref:s,onMouseDown:r(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(t)}),onKeyDown:r(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(t)}),onFocus:r(e.onFocus,()=>{let e="manual"!==o.activationMode;h||l||!e||o.onValueChange(t)})})})});N.displayName=b;var k="TabsContent",C=t.forwardRef((e,s)=>{let{__scopeTabs:a,value:r,forceMount:l,children:i,...o}=e,d=v(k,a),u=S(d.baseId,r),x=T(d.baseId,r),h=r===d.value,p=t.useRef(h);return t.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(n.C,{present:l||h,children:a=>{let{present:t}=a;return(0,m.jsx)(c.sG.div,{"data-state":h?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!t,id:x,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:p.current?"0s":void 0},children:t&&i})}})});function S(e,s){return"".concat(e,"-trigger-").concat(s)}function T(e,s){return"".concat(e,"-content-").concat(s)}C.displayName=k;var A=j,_=w,E=N,M=C}},e=>{e.O(0,[7804,8214,8619,7791,8486,598,9796,8233,8202,1327,4846,8441,5964,7358],()=>e(e.s=23866)),_N_E=e.O()}]);