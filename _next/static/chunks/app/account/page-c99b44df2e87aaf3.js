(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1298],{4863:(e,a,s)=>{"use strict";s.d(a,{Ft:()=>n,Tq:()=>r,vw:()=>t,x0:()=>i});let t=[{name:"Free",price:"free",period:"forever",description:"Great to explore the basics and try the Fitness Calculator.",features:["Core Fitness Calculator features","Access to base gym exercises","Muscle involvement breakdowns","Dark theme only"],cta:"Get started",href:"/",themeCapabilities:{canToggleTheme:!1,defaultTheme:"dark",allowedThemes:["dark"]}},{name:"Personal",price:"$5.99",period:"/mo",description:"Useful for tracking your progress and getting personalized weight recommendations.",features:["Everything in Free","Data saved in account","SMM + BFM metrics calculations","Exercise video search (YouTube)","Light + dark themes"],cta:"Subscribe",href:"https://buy.stripe.com/cNi3cudszgjt7481Rt0Ba02",yearlyPrice:"$43.00",yearlyHref:"https://buy.stripe.com/8x24gy3RZ0kvewA2Vx0Ba01",highlighted:!0,themeCapabilities:{canToggleTheme:!0,defaultTheme:"system",allowedThemes:["light","dark","system"]}},{name:"Trainer",price:"$14.99",period:"/mo",description:"For coaches, fitness trainers with multiple clients.",features:["Everything in Personal","Exercise video search (YouTube)","+2000 growing exercises updates in other categories","Save multiple users/clients configuration","Light + dark themes"],cta:"Subscribe",href:"https://buy.stripe.com/4gMaEW2NV0kvewA1Rt0Ba03",yearlyPrice:"$108.00",yearlyHref:"https://buy.stripe.com/00waEW2NVd7hewA9jV0Ba04",themeCapabilities:{canToggleTheme:!0,defaultTheme:"system",allowedThemes:["light","dark","system"]}}];function l(e){return t.find(a=>a.name===e)}function n(e){var a;let s=l(e);return null!=(a=null==s?void 0:s.themeCapabilities.canToggleTheme)&&a}function r(e){var a;let s=l(e);return null!=(a=null==s?void 0:s.themeCapabilities.allowedThemes)?a:["dark"]}function i(e){var a;let s=l(e);return null!=(a=null==s?void 0:s.themeCapabilities.defaultTheme)?a:"dark"}},13070:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>_});var t=s(95155),l=s(12115),n=s(35695),r=s(6874),i=s.n(r),c=s(79308),o=s(17313),d=s(66695),u=s(85057),m=s(62523),h=s(30285),x=s(22346),g=s(26126),p=s(92035),j=s(51362),v=s(62098),f=s(93509),y=s(14738),N=s(32919),b=s(21272),w=s(54165);let C=[{id:"light",name:"Light",description:"Clean and bright interface",icon:v.A},{id:"dark",name:"Dark",description:"Easy on the eyes",icon:f.A},{id:"system",name:"System",description:"Matches your device preference",icon:y.A}];function k(){let{theme:e,setTheme:a,resolvedTheme:s}=(0,j.D)(),{canToggleTheme:r,currentTier:i,allowedThemes:c}=(0,b.b)(),o=(0,n.useRouter)(),[u,m]=(0,l.useState)(!1),x=e||"system";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:["Theme Preference",!r&&(0,t.jsxs)(g.E,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(N.A,{className:"h-3 w-3 mr-1"}),"Personal+"]})]}),(0,t.jsx)(d.BT,{children:r?"Choose your preferred theme appearance":"Theme customization available with Personal and Trainer plans"})]}),(0,t.jsxs)(d.Wu,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:C.map(e=>{let s=x===e.id,l=c.includes(e.id),n=e.icon;return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(h.$,{variant:"outline",className:"w-full h-auto p-4 flex flex-col items-center gap-3 ".concat(!l?"opacity-50 cursor-not-allowed":""," ").concat(s?"border-2 border-primary bg-primary/10 hover:bg-primary/15":"hover:bg-accent"),onClick:()=>l?(e=>{if(!r)return void m(!0);a(e)})(e.id):m(!0),disabled:!l&&r,children:[(0,t.jsx)("div",{className:"p-3 rounded-full ".concat(s?"bg-primary/20 border border-primary/30":"bg-muted"),children:(0,t.jsx)(n,{className:"h-6 w-6 ".concat(s?"text-primary":"text-muted-foreground")})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-medium ".concat(s?"text-primary font-semibold":""),children:e.name}),(0,t.jsx)("div",{className:"text-xs mt-1 ".concat(s?"text-primary/70":"text-muted-foreground"),children:e.description})]}),!l&&(0,t.jsx)("div",{className:"absolute top-2 right-2",children:(0,t.jsx)(N.A,{className:"h-4 w-4 text-muted-foreground"})})]}),s&&(0,t.jsx)("div",{className:"absolute top-2 right-2",children:(0,t.jsx)("div",{className:"bg-primary text-primary-foreground rounded-full p-1.5 shadow-sm",children:(0,t.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]},e.id)})}),!r&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg border border-border/50",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(N.A,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Upgrade to customize themes"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Current plan: ",(0,t.jsx)("span",{className:"font-medium",children:i})," • Available themes: Dark only"]}),(0,t.jsx)(h.$,{size:"sm",className:"mt-3",onClick:()=>m(!0),children:"View upgrade options"})]})]})}),(0,t.jsxs)("div",{className:"mt-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("p",{children:["Current theme: ",(0,t.jsx)("span",{className:"font-medium capitalize",children:x})]}),(0,t.jsxs)("p",{children:["Resolved appearance: ",(0,t.jsx)("span",{className:"font-medium capitalize",children:s||"loading..."})]})]})]})]}),(0,t.jsx)(w.lG,{open:u,onOpenChange:m,children:(0,t.jsxs)(w.Cf,{children:[(0,t.jsxs)(w.c7,{children:[(0,t.jsx)(w.L3,{children:"Upgrade Required"}),(0,t.jsx)(w.rr,{children:"Theme customization is available for Personal and Trainer plans. Upgrade your plan to access light, dark, and system theme options."})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,t.jsxs)("p",{children:["Current plan: ",(0,t.jsx)("span",{className:"font-medium",children:i})]}),(0,t.jsxs)("p",{children:["Available themes: ",c.join(", ")]}),(0,t.jsx)("p",{className:"mt-2",children:"With Personal or Trainer plan, you get:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside ml-2 mt-1",children:[(0,t.jsx)("li",{children:"Light theme"}),(0,t.jsx)("li",{children:"Dark theme"}),(0,t.jsx)("li",{children:"System preference matching"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(h.$,{onClick:()=>{m(!1),o.push("/account?tab=billing#plans")},className:"flex-1",children:"View Plans"}),(0,t.jsx)(h.$,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})]})]})]})})]})}var S=s(41152),R=s(87519),T=s(4863),E=s(56671),B=s(49509);function _(){(0,n.useRouter)();let[e,a]=(0,l.useState)(!0),[s,r]=(0,l.useState)(null),[j,v]=(0,l.useState)(""),[f,y]=(0,l.useState)(""),[N,b]=(0,l.useState)(null),[w,C]=(0,l.useState)([]),[_,A]=(0,l.useState)(""),[F,P]=(0,l.useState)(""),[U,L]=(0,l.useState)(!1),[$,Z]=(0,l.useState)(!1),[z,D]=(0,l.useState)(!1),[G,I]=(0,l.useState)("account"),[W,M]=(0,l.useState)("Free"),[O,V]=(0,l.useState)(!1),q=(0,n.useSearchParams)(),{isAuthenticated:J,isLoading:X,error:Y,events:H,accounts:K,removeAccount:Q,logout:ee,fetchEvents:ea}=(0,R.R)({autoSync:!0}),es=(0,l.useMemo)(()=>w.some(e=>"email"===e.provider),[w]),et=(0,l.useMemo)(()=>"Personal"===W||"Trainer"===W,[W]);(0,l.useEffect)(()=>{let e=q.get("tab");("account"===e||"calendar"===e||"billing"===e||"data"===e)&&I(e)},[q]),(0,l.useEffect)(()=>{J&&ea()},[J,ea]),(0,l.useEffect)(()=>{let e=null;return(async()=>{var s,t,l,n,i,o,d,u;let{data:m}=await c.N.auth.getSession(),h=null!=(i=null==(s=m.session)?void 0:s.user)?i:null;if(!h)return a(!1);r(h.id),v(null!=(o=h.email)?o:""),A(null!=(d=h.email)?d:""),y((null==(t=h.user_metadata)?void 0:t.full_name)||(null==(l=h.user_metadata)?void 0:l.name)||""),b(null!=(u=h.created_at)?u:null),C(h.identities||[]);let x=(null==(n=h.user_metadata)?void 0:n.plan)||null,g=localStorage.getItem("fitspo:plan")||localStorage.getItem("stronk:plan");M(x||g||"Free"),a(!1);let{data:p}=c.N.auth.onAuthStateChange((e,a)=>{var s,t,l,n,i,c;let o=null==a?void 0:a.user;if(!o)return;r(o.id),v(null!=(n=o.email)?n:""),A(null!=(i=o.email)?i:""),y((null==(s=o.user_metadata)?void 0:s.full_name)||(null==(t=o.user_metadata)?void 0:t.name)||""),b(null!=(c=o.created_at)?c:null),C(o.identities||[]);let d=(null==(l=o.user_metadata)?void 0:l.plan)||null,u=localStorage.getItem("fitspo:plan")||localStorage.getItem("stronk:plan");M(d||u||"Free")});e=()=>p.subscription.unsubscribe()})(),()=>{e&&e()}},[]);let el=async()=>{L(!0);try{let{error:e}=await c.N.auth.updateUser({data:{full_name:f}});if(e)throw e;E.oR.success("Profile updated")}catch(e){E.oR.error("Failed to save profile")}finally{L(!1)}},en=async()=>{if(_&&_!==j){Z(!0);try{let e=(B.env.NEXT_PUBLIC_BASE_URL||"/").replace(/\/?$/,"/"),a="".concat(window.location.origin).concat(e,"auth/callback?next=").concat(encodeURIComponent("".concat(e,"account?tab=account"))),{error:s}=await c.N.auth.updateUser({email:_},a?{emailRedirectTo:a}:void 0);if(s)throw s;E.oR.success("Email update requested. Check your inbox to confirm.")}catch(e){E.oR.error("Failed to update email")}finally{Z(!1)}}},er=async()=>{if(es&&F){D(!0);try{let{error:e}=await c.N.auth.updateUser({password:F});if(e)throw e;P(""),E.oR.success("Password updated")}catch(e){E.oR.error("Failed to update password")}finally{D(!1)}}};if(e)return(0,t.jsxs)("div",{className:"container mx-auto p-4 md:p-8",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center gap-3",children:[(0,t.jsx)(h.$,{variant:"ghost",disabled:!0,children:"← Back"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"h-8 w-32 mb-2 bg-muted animate-pulse rounded"}),(0,t.jsx)("div",{className:"h-4 w-64 bg-muted animate-pulse rounded"})]})]}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)("div",{className:"h-6 w-24 mb-2 bg-muted animate-pulse rounded"}),(0,t.jsx)("div",{className:"h-4 w-48 bg-muted animate-pulse rounded"})]}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 w-20 bg-muted animate-pulse rounded"}),(0,t.jsx)("div",{className:"h-10 w-full bg-muted animate-pulse rounded"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 w-32 bg-muted animate-pulse rounded"}),(0,t.jsx)("div",{className:"h-10 w-full bg-muted animate-pulse rounded"})]})]})})]})})]});if(!s){{let e=(B.env.NEXT_PUBLIC_BASE_URL||"/").replace(/\/?$/,"/");window.location.replace("".concat(e,"ideal-exercise-weight"))}return null}return(0,t.jsxs)("div",{className:"container mx-auto p-4 md:p-8",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center gap-3",children:[(0,t.jsx)(h.$,{variant:"ghost",asChild:!0,children:(0,t.jsx)(i(),{href:"/",children:"← Back"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Account"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your profile, billing, and data."})]})]}),(0,t.jsxs)(o.tU,{value:G,onValueChange:I,className:"w-full",children:[(0,t.jsxs)(o.j7,{children:[(0,t.jsx)(o.Xi,{value:"account",children:"Account"}),(0,t.jsx)(o.Xi,{value:"calendar",children:"Calendar Sync"}),(0,t.jsx)(o.Xi,{value:"billing",children:"Pricing & Billing"}),(0,t.jsx)(o.Xi,{value:"data",children:"Data"})]}),(0,t.jsxs)(o.av,{value:"account",className:"space-y-6",children:[(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Profile"}),(0,t.jsx)(d.BT,{children:"Update your name and basic information."})]}),(0,t.jsxs)(d.Wu,{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(u.J,{htmlFor:"fullName",children:"Full name"}),(0,t.jsx)(m.p,{id:"fullName",value:f,onChange:e=>y(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(u.J,{children:"Account created"}),(0,t.jsx)(m.p,{value:N?new Date(N).toLocaleString():"—",readOnly:!0})]})]}),(0,t.jsx)(d.wL,{children:(0,t.jsx)(h.$,{onClick:el,disabled:U,children:U?"Saving…":"Save profile"})})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Sign-in & Security"}),(0,t.jsx)(d.BT,{children:"Update your email and password."})]}),(0,t.jsxs)(d.Wu,{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(u.J,{htmlFor:"email",children:"Email"}),(0,t.jsx)(m.p,{id:"email",type:"email",value:_,onChange:e=>A(e.target.value)})]}),(0,t.jsx)(h.$,{variant:"default",onClick:en,disabled:$||_===j,children:$?"Updating…":"Update email"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Updating your email may require confirmation."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(u.J,{htmlFor:"password",children:"New password"}),(0,t.jsx)(m.p,{id:"password",type:"password",value:F,onChange:e=>P(e.target.value),placeholder:es?"Enter a new password":"Not available for social login",disabled:!es})]}),(0,t.jsx)(h.$,{variant:"default",onClick:er,disabled:!es||z||!F,children:z?"Updating…":"Update password"}),!es&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Password changes are only available for email/password accounts."})]})]})]}),(0,t.jsx)(k,{}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Subscription"}),(0,t.jsx)(d.BT,{children:"Manage your plan and billing."})]}),(0,t.jsx)(d.wL,{children:(0,t.jsx)(h.$,{onClick:()=>I("billing"),children:"Manage subscription"})})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Calendar Integration"}),(0,t.jsx)(d.BT,{children:"Connect your Google Calendar to sync workout sessions."})]}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(J?"bg-green-500":"bg-gray-300")}),(0,t.jsx)("span",{className:"text-sm",children:J?"Google Calendar connected":"Not connected"})]}),J&&(0,t.jsxs)(g.E,{variant:"secondary",className:"text-green-700 bg-green-100",children:[H.length," events"]})]})}),(0,t.jsx)(d.wL,{children:(0,t.jsx)(h.$,{onClick:()=>I("calendar"),variant:"outline",children:J?"Manage Calendar":"Connect Calendar"})})]})]}),(0,t.jsxs)(o.av,{value:"calendar",className:"space-y-6",children:[(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Google Calendar Integration"}),(0,t.jsx)(d.BT,{children:"Connect your Google Calendar to sync workout sessions and view all your events in one place."})]}),(0,t.jsxs)(d.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(J?"bg-green-500":"bg-gray-300")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:J?"".concat(K.length," Google Calendar(s) Connected"):"Not connected"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:J?"".concat(H.length," events synced across ").concat(K.length," account(s)"):"Connect to sync your workout sessions with Google Calendar"})]})]}),J&&(0,t.jsxs)(g.E,{variant:"secondary",className:"text-green-700 bg-green-100",children:[K.length," Connected"]})]}),K.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Connected Accounts:"}),K.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.email}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Connected ",new Date(e.connectedAt).toLocaleDateString()]})]})]}),(0,t.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>Q(e.id),className:"text-red-600 hover:text-red-700",children:"Remove"})]},e.id))]}),Y&&(0,t.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsxs)("div",{className:"text-sm text-red-700",children:[(0,t.jsx)("strong",{children:"Error:"})," ",Y]})}),(0,t.jsx)("div",{className:"flex gap-3",children:J?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.$,{onClick:()=>V(!0),variant:"outline",className:"flex-1",children:"Manage Connection"}),(0,t.jsx)(h.$,{onClick:ee,variant:"outline",className:"flex-1",children:"Disconnect"})]}):(0,t.jsx)(h.$,{onClick:()=>V(!0),disabled:X,className:"flex-1",children:X?"Connecting...":"Connect Google Calendar"})}),(0,t.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Benefits of connecting:"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-2",children:[(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-500",children:"✓"}),(0,t.jsx)("span",{children:"Workout sessions automatically sync to your Google Calendar"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-500",children:"✓"}),(0,t.jsx)("span",{children:"View all your calendar events in one unified view"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-500",children:"✓"}),(0,t.jsx)("span",{children:"Google Calendar events appear in grey for easy distinction"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-500",children:"✓"}),(0,t.jsx)("span",{children:"Real-time synchronization between platforms"})]})]})]})]})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Privacy & Security"}),(0,t.jsx)(d.BT,{children:"How we handle your calendar data"})]}),(0,t.jsx)(d.Wu,{className:"space-y-3",children:(0,t.jsxs)("div",{className:"text-sm text-muted-foreground space-y-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Data Access:"})," We only request access to view and edit your calendar events. We cannot access your emails, contacts, or other Google data."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Data Storage:"})," Your calendar data is not stored on our servers. We only sync events in real-time and store authentication tokens locally."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Revoke Access:"})," You can disconnect your Google Calendar at any time using the disconnect button above, or revoke access directly in your Google Account settings."]})]})})]})]}),(0,t.jsx)(o.av,{value:"billing",className:"space-y-6",children:(0,t.jsxs)(d.Zp,{id:"plans",children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Plans"}),(0,t.jsxs)(d.BT,{children:["Manage your subscription. Current plan: ",W]})]}),(0,t.jsx)(d.Wu,{children:(0,t.jsx)(p.PricingPlansClient,{plans:T.vw})}),(0,t.jsxs)(d.wL,{className:"flex gap-3",children:[(0,t.jsx)(h.$,{disabled:!et,onClick:async()=>{if(et)try{var e;let{data:a}=await c.N.auth.getSession(),s=null==(e=a.session)?void 0:e.access_token;if(!s)return void E.oR.error("Sign in required");let t=await fetch("/api/stripe/portal",{method:"POST",headers:{Authorization:"Bearer ".concat(s)}}),l=await t.json();if(!t.ok||!(null==l?void 0:l.url))return void E.oR.error("Unable to open billing portal");window.location.href=l.url}catch(e){E.oR.error("Unable to open billing portal")}},children:et?"Manage subscription":"Manage subscription (Free plan)"}),(0,t.jsx)(h.$,{variant:"secondary",onClick:async()=>{var e,a,s;let{data:t}=await c.N.auth.getSession(),l=(null==(s=t.session)||null==(a=s.user)||null==(e=a.user_metadata)?void 0:e.plan)||null,n=localStorage.getItem("fitspo:plan")||localStorage.getItem("stronk:plan");M(l||n||"Free")},children:"Refresh status"})]})]})}),(0,t.jsxs)(o.av,{value:"data",className:"space-y-6",children:[(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Export"}),(0,t.jsx)(d.BT,{children:"Download a copy of your data."})]}),(0,t.jsx)(d.wL,{children:(0,t.jsx)(h.$,{onClick:()=>{(0,E.oR)("Preparing download…");let e={profile:{id:s,email:j,fullName:f,createdAt:N},local:{theme:localStorage.getItem("theme")}};try{{let a=Object.keys(localStorage).filter(e=>e.startsWith("fitspo:")||e.startsWith("stronk:")),s={};for(let e of a)s[e]=localStorage.getItem(e);e.localKeys=s}}catch(e){}let a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download="fitspo-account-export.json",l.click(),URL.revokeObjectURL(t)},children:"Export data"})})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Saved settings"}),(0,t.jsx)(d.BT,{children:"Remove saved settings from this device."})]}),(0,t.jsx)(d.wL,{children:(0,t.jsx)(h.$,{variant:"destructive",onClick:()=>{if(!window.confirm("Delete saved settings on this device? This cannot be undone."))return void E.oR.message("Deletion cancelled");try{localStorage.removeItem("theme"),Object.keys(localStorage).filter(e=>e.startsWith("fitspo:")||e.startsWith("stronk:")).forEach(e=>localStorage.removeItem(e)),E.oR.success("Saved data deleted")}catch(e){E.oR.error("Failed to delete saved data")}},children:"Delete saved data"})})]}),(0,t.jsx)(x.w,{}),(0,t.jsxs)(d.Zp,{className:"border-destructive/50",children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Danger zone"}),(0,t.jsx)(d.BT,{children:"Delete your account from this platform."})]}),(0,t.jsx)(d.Wu,{children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Account deletion requires a secure server-side process. If this project adds a deletion endpoint later, it will appear here. For now, contact support or remove your saved data above."})}),(0,t.jsx)(d.wL,{children:(0,t.jsx)(h.$,{variant:"outline",disabled:!0,children:"Delete account (unavailable)"})})]})]})]}),O&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-xl max-w-md w-full",children:[(0,t.jsx)(S.D,{onEventsSync:e=>{console.log("Synced events:",e),E.oR.success("Successfully synced ".concat(e.length," events")),V(!1)},onEventCreate:e=>{console.log("Event created in Google Calendar:",e),E.oR.success("Event created in Google Calendar")},onEventUpdate:(e,a)=>{console.log("Event updated in Google Calendar:",e,a),E.oR.success("Event updated in Google Calendar")},onEventDelete:e=>{console.log("Event deleted from Google Calendar:",e),E.oR.success("Event deleted from Google Calendar")}}),(0,t.jsx)("div",{className:"p-4 border-t",children:(0,t.jsx)(h.$,{onClick:()=>V(!1),variant:"outline",className:"w-full",children:"Close"})})]})})]})}},21272:(e,a,s)=>{"use strict";s.d(a,{b:()=>r});var t=s(12115),l=s(79308),n=s(4863);function r(){let[e,a]=(0,t.useState)("Free"),[s,r]=(0,t.useState)(null),[i,c]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=null;return(async()=>{var s,t,n;let{data:i}=await l.N.auth.getSession(),o=null!=(t=null==(s=i.session)?void 0:s.user)?t:null;if(o){r(o.id);let e=(null==(n=o.user_metadata)?void 0:n.plan)||null,s=localStorage.getItem("fitspo:plan")||localStorage.getItem("stronk:plan");a(e||s||"Free")}else a("Free");c(!1);let{data:d}=l.N.auth.onAuthStateChange((e,s)=>{let t=null==s?void 0:s.user;if(t){var l;r(t.id);let e=(null==(l=t.user_metadata)?void 0:l.plan)||null,s=localStorage.getItem("fitspo:plan")||localStorage.getItem("stronk:plan");a(e||s||"Free")}else r(null),a("Free")});e=()=>d.subscription.unsubscribe()})(),()=>{e&&e()}},[]);let o=(0,n.Ft)(e),d=(0,n.Tq)(e),u=(0,n.x0)(e);return{currentTier:e,userId:s,loading:i,canToggleTheme:o,allowedThemes:d,defaultTheme:u,isPaidTier:"Personal"===e||"Trainer"===e}}},22346:(e,a,s)=>{"use strict";s.d(a,{w:()=>r});var t=s(95155);s(12115);var l=s(87489),n=s(59434);function r(e){let{className:a,orientation:s="horizontal",decorative:r=!0,...i}=e;return(0,t.jsx)(l.b,{"data-slot":"separator",decorative:r,orientation:s,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...i})}},54165:(e,a,s)=>{"use strict";s.d(a,{Cf:()=>u,Es:()=>h,L3:()=>x,c7:()=>m,lG:()=>i,rr:()=>g,zM:()=>c});var t=s(95155);s(12115);var l=s(86224),n=s(54416),r=s(59434);function i(e){let{...a}=e;return(0,t.jsx)(l.bL,{"data-slot":"dialog",...a})}function c(e){let{...a}=e;return(0,t.jsx)(l.l9,{"data-slot":"dialog-trigger",...a})}function o(e){let{...a}=e;return(0,t.jsx)(l.ZL,{"data-slot":"dialog-portal",...a})}function d(e){let{className:a,...s}=e;return(0,t.jsx)(l.hJ,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...s})}function u(e){let{className:a,children:s,showCloseButton:i=!0,...c}=e;return(0,t.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,t.jsx)(d,{}),(0,t.jsxs)(l.UC,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...c,children:[s,i&&(0,t.jsxs)(l.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(n.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",a),...s})}function h(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...s})}function x(e){let{className:a,...s}=e;return(0,t.jsx)(l.hE,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",a),...s})}function g(e){let{className:a,...s}=e;return(0,t.jsx)(l.VY,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...s})}},72455:(e,a,s)=>{Promise.resolve().then(s.bind(s,13070))}},e=>{e.O(0,[7804,8214,8619,9796,9199,8480,2035,7512,8441,5964,7358],()=>e(e.s=72455)),_N_E=e.O()}]);